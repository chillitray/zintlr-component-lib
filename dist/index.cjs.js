"use strict";var e=require("sonner"),t=require("react/jsx-runtime"),r=require("next/image"),o=require("react"),n=require("next/link"),s=require("axios"),i=require("yup"),a=require("jsonwebtoken");function l(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var c=l(i),u=l(a);const d=()=>"undefined"!=typeof window;const g=(e,t=null)=>{if("undefined"==typeof document)return null;const r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttributeNS(null,"width","200"),r.setAttributeNS(null,"height","200"),r.setAttributeNS(null,"fill","none"),r.setAttribute("style",(t?`background:${t?.bgColor}`:"background-image: linear-gradient(180deg, #112634 0%, #000000 100%)")+";\n\t\tbackground-repeat:no-repeat !important;\n\t\tdisplay: flex;\n\t\talign-items:center;"),e){let o="50%";d()&&"firefox"===function(){const e=navigator.userAgent;let t;return t=e.match(/chrome|chromium|crios/i)?"chrome":e.match(/firefox|fxios/i)?"firefox":e.match(/safari/i)?"safari":e.match(/opr\//i)?"opera":e.match(/edg/i)?"edge":"No browser detection",t}()&&(o="55%"),r.innerHTML=`\n\t\t\t<text x="50%" y=${o} fill="${t?.textColor??"white"}" style="font-weight: 700; text-transform: uppercase; font-family: 'Roboto', sans-serif;"\n\t\t\tdominant-baseline="middle"  text-anchor="middle" alignment-baseline="central" font-size="90">\n\t\t\t\t${e}\n\t\t\t</text>\n\t\t`}else r.innerHTML='\n<g clip-path="url(#0cf21cfe8e)" transform="translate(5, 20) scale(0.5)">\n<path fill="#ffffff" d="M 238.238281 215.71875 C 255.039062 215.71875 270.484375 215.71875 285.882812 215.570312 C 286.886719 215.328125 287.800781 214.894531 288.625 214.265625 C 289.445312 213.636719 290.101562 212.863281 290.59375 211.953125 C 299.421875 196.890625 308.148438 181.828125 316.625 166.765625 C 317.03125 165.753906 317.234375 164.703125 317.234375 163.613281 C 317.234375 162.523438 317.03125 161.472656 316.625 160.464844 C 315.144531 157.265625 313.421875 154.203125 311.457031 151.273438 C 310.230469 153.007812 309.175781 154.238281 308.375 155.617188 C 300.523438 169.425781 292.5 183.234375 284.980469 197.140625 C 282.472656 201.761719 279.585938 203.820312 274.347656 203.191406 C 270.242188 202.960938 266.140625 202.960938 262.035156 203.191406 C 278.382812 174.09375 294.382812 145.828125 310.957031 116.703125 C 319.984375 132.296875 328.507812 146.832031 336.757812 161.59375 C 337.011719 162.59375 337.054688 163.601562 336.882812 164.621094 C 336.714844 165.640625 336.347656 166.578125 335.78125 167.441406 C 324.261719 187.675781 312.621094 207.84375 300.851562 227.945312 C 300.253906 229.003906 299.464844 229.890625 298.484375 230.609375 C 297.503906 231.328125 296.421875 231.8125 295.234375 232.0625 C 266.898438 232.339844 238.566406 232.265625 208.976562 232.265625 C 213.664062 224.003906 217.828125 216.523438 222.117188 209.117188 C 241.046875 176.304688 259.804688 143.316406 279.136719 110.855469 C 282.773438 104.730469 283.425781 100.109375 278.910156 94.738281 C 277.597656 92.972656 276.402344 91.132812 275.324219 89.214844 L 183.777344 248.082031 L 289.265625 248.082031 C 283.675781 257.769531 278.785156 266.558594 273.644531 275.269531 C 269.910156 281.644531 267.402344 290.332031 261.808594 293.546875 C 256.21875 296.757812 247.441406 294.652344 240.070312 294.675781 L 101.679688 294.675781 C 148.996094 212.730469 195.710938 131.792969 243.027344 49.773438 L 131.972656 49.773438 C 120.035156 49.773438 120.035156 49.773438 115.171875 61.75 L 219.960938 61.75 L 98.722656 272.15625 C 89.71875 256.515625 81.167969 242.03125 72.96875 227.09375 C 72.609375 225.941406 72.496094 224.765625 72.636719 223.566406 C 72.777344 222.367188 73.15625 221.25 73.773438 220.214844 C 93.011719 186.574219 112.347656 153 131.769531 119.492188 C 133.125 117.132812 134.277344 114.695312 136.109375 111.507812 C 119.632812 111.507812 104.214844 111.507812 88.792969 111.632812 C 87.761719 111.773438 86.804688 112.121094 85.929688 112.683594 C 85.050781 113.246094 84.335938 113.96875 83.777344 114.847656 C 74.851562 130.011719 66.058594 145.273438 57.398438 160.640625 C 57.019531 161.558594 56.828125 162.519531 56.828125 163.511719 C 56.828125 164.507812 57.019531 165.46875 57.398438 166.386719 C 59.101562 169.855469 61.015625 173.203125 63.140625 176.429688 C 66 171.410156 68.480469 167.390625 70.863281 163.175781 C 77.234375 152.027344 83.800781 140.980469 89.769531 129.609375 C 89.945312 129.164062 90.15625 128.738281 90.40625 128.328125 C 90.65625 127.917969 90.9375 127.535156 91.25 127.175781 C 91.566406 126.816406 91.910156 126.484375 92.28125 126.183594 C 92.652344 125.882812 93.046875 125.617188 93.464844 125.382812 C 93.882812 125.148438 94.316406 124.953125 94.765625 124.796875 C 95.21875 124.636719 95.679688 124.519531 96.152344 124.441406 C 96.621094 124.363281 97.097656 124.324219 97.574219 124.328125 C 98.054688 124.332031 98.527344 124.378906 98.996094 124.460938 C 103.035156 124.789062 107.121094 124.460938 112.210938 124.460938 C 95.613281 153.359375 79.742188 181.527344 63.242188 210.597656 C 55.71875 197.441406 48.972656 184.816406 41.226562 172.941406 C 36.8125 166.210938 36.886719 161.34375 41.226562 154.464844 C 52.332031 136.539062 62.539062 118.035156 73.046875 99.660156 C 73.40625 98.839844 73.882812 98.101562 74.476562 97.433594 C 75.070312 96.765625 75.75 96.207031 76.519531 95.757812 C 77.292969 95.308594 78.113281 94.984375 78.984375 94.792969 C 79.855469 94.601562 80.734375 94.550781 81.621094 94.636719 C 109.054688 94.886719 136.511719 94.761719 165.296875 94.761719 C 163.617188 97.953125 162.4375 100.363281 161.109375 102.671875 C 139.792969 139.625 118.882812 176.832031 96.890625 213.359375 C 91.148438 222.875 91.199219 229.726562 99.398438 237.613281 C 129.464844 185.015625 159.703125 132.519531 190.496094 79.070312 L 85.582031 79.070312 C 86.636719 76.761719 87.210938 75.230469 88.089844 73.824219 C 95.210938 61.273438 102.28125 48.84375 109.703125 36.542969 C 110.363281 35.5625 111.191406 34.761719 112.191406 34.140625 C 113.195312 33.519531 114.277344 33.132812 115.445312 32.980469 C 166.902344 32.792969 218.355469 32.753906 269.808594 32.851562 C 270.554688 32.957031 271.289062 33.109375 272.015625 33.304688 C 225.101562 114.671875 178.359375 195.710938 130.96875 277.753906 L 242.527344 277.753906 C 254.238281 277.753906 254.636719 277.453125 259.078125 265.203125 L 154.4375 265.203125 L 275.148438 55.625 C 276.265625 57.027344 277.3125 58.484375 278.285156 59.992188 C 285.605469 72.542969 292.753906 85.324219 300.273438 97.824219 C 300.796875 98.542969 301.195312 99.320312 301.472656 100.164062 C 301.746094 101.007812 301.882812 101.871094 301.882812 102.757812 C 301.882812 103.644531 301.746094 104.511719 301.472656 105.355469 C 301.195312 106.195312 300.796875 106.976562 300.273438 107.691406 C 280.566406 141.484375 260.972656 175.402344 241.5 209.445312 C 240.546875 211.101562 239.742188 212.808594 238.238281 215.71875 Z M 238.238281 215.71875 " fill-opacity="1" fill-rule="nonzero" />\n</g>';return r},p=(e,t=null)=>{const r=(e=>{let t;if(e=e?e.replace(/[^a-zA-Z0-9 ]/g,""):"",/^[A-Za-z0-9 ]*$/.test(e)){let r=e.trim().toUpperCase().split(" ");r=r.map(e=>e.trim()),t=r[0].charAt(0)+""+(r.length>1?r[r.length-1].charAt(0):""),t=String(t).toUpperCase()}return t})(e);return r?g(r,t):g()},C=(e,t=null)=>{if(e&&d()&&"undefined"!=typeof document&&"undefined"!=typeof window)try{const r=p(e,t);if(!r)return"";const o=(new XMLSerializer).serializeToString(r);return"data:image/svg+xml;base64,"+window.btoa(o)}catch(e){return console.warn("Error creating image:",e),""}return""},h=e=>{const t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttributeNS(null,"width","200"),t.setAttributeNS(null,"height","200"),t.setAttributeNS(null,"fill","none"),t.setAttribute("style","background-image: linear-gradient(180deg, #112634 0%, #000000 100%);\n\t\tbackground-repeat:no-repeat !important;\n\t\tdisplay: flex;\n\t\talign-items:center;"),t.innerHTML=e?`\n\t\t\t<text x="50%" y="50%" fill="white" style="font-weight: 600; font-family:'Inter', text-transform: uppercase;"\n\t\t\tdominant-baseline="middle"  text-anchor="middle" alignment-baseline="central" font-size="100">\n\t\t\t\t${e}\n\t\t\t</text>\n\t\t`:'\n<g clip-path="url(#0cf21cfe8e)" transform="translate(5, 20) scale(0.5)">\n<path fill="#ffffff" d="M 238.238281 215.71875 C 255.039062 215.71875 270.484375 215.71875 285.882812 215.570312 C 286.886719 215.328125 287.800781 214.894531 288.625 214.265625 C 289.445312 213.636719 290.101562 212.863281 290.59375 211.953125 C 299.421875 196.890625 308.148438 181.828125 316.625 166.765625 C 317.03125 165.753906 317.234375 164.703125 317.234375 163.613281 C 317.234375 162.523438 317.03125 161.472656 316.625 160.464844 C 315.144531 157.265625 313.421875 154.203125 311.457031 151.273438 C 310.230469 153.007812 309.175781 154.238281 308.375 155.617188 C 300.523438 169.425781 292.5 183.234375 284.980469 197.140625 C 282.472656 201.761719 279.585938 203.820312 274.347656 203.191406 C 270.242188 202.960938 266.140625 202.960938 262.035156 203.191406 C 278.382812 174.09375 294.382812 145.828125 310.957031 116.703125 C 319.984375 132.296875 328.507812 146.832031 336.757812 161.59375 C 337.011719 162.59375 337.054688 163.601562 336.882812 164.621094 C 336.714844 165.640625 336.347656 166.578125 335.78125 167.441406 C 324.261719 187.675781 312.621094 207.84375 300.851562 227.945312 C 300.253906 229.003906 299.464844 229.890625 298.484375 230.609375 C 297.503906 231.328125 296.421875 231.8125 295.234375 232.0625 C 266.898438 232.339844 238.566406 232.265625 208.976562 232.265625 C 213.664062 224.003906 217.828125 216.523438 222.117188 209.117188 C 241.046875 176.304688 259.804688 143.316406 279.136719 110.855469 C 282.773438 104.730469 283.425781 100.109375 278.910156 94.738281 C 277.597656 92.972656 276.402344 91.132812 275.324219 89.214844 L 183.777344 248.082031 L 289.265625 248.082031 C 283.675781 257.769531 278.785156 266.558594 273.644531 275.269531 C 269.910156 281.644531 267.402344 290.332031 261.808594 293.546875 C 256.21875 296.757812 247.441406 294.652344 240.070312 294.675781 L 101.679688 294.675781 C 148.996094 212.730469 195.710938 131.792969 243.027344 49.773438 L 131.972656 49.773438 C 120.035156 49.773438 120.035156 49.773438 115.171875 61.75 L 219.960938 61.75 L 98.722656 272.15625 C 89.71875 256.515625 81.167969 242.03125 72.96875 227.09375 C 72.609375 225.941406 72.496094 224.765625 72.636719 223.566406 C 72.777344 222.367188 73.15625 221.25 73.773438 220.214844 C 93.011719 186.574219 112.347656 153 131.769531 119.492188 C 133.125 117.132812 134.277344 114.695312 136.109375 111.507812 C 119.632812 111.507812 104.214844 111.507812 88.792969 111.632812 C 87.761719 111.773438 86.804688 112.121094 85.929688 112.683594 C 85.050781 113.246094 84.335938 113.96875 83.777344 114.847656 C 74.851562 130.011719 66.058594 145.273438 57.398438 160.640625 C 57.019531 161.558594 56.828125 162.519531 56.828125 163.511719 C 56.828125 164.507812 57.019531 165.46875 57.398438 166.386719 C 59.101562 169.855469 61.015625 173.203125 63.140625 176.429688 C 66 171.410156 68.480469 167.390625 70.863281 163.175781 C 77.234375 152.027344 83.800781 140.980469 89.769531 129.609375 C 89.945312 129.164062 90.15625 128.738281 90.40625 128.328125 C 90.65625 127.917969 90.9375 127.535156 91.25 127.175781 C 91.566406 126.816406 91.910156 126.484375 92.28125 126.183594 C 92.652344 125.882812 93.046875 125.617188 93.464844 125.382812 C 93.882812 125.148438 94.316406 124.953125 94.765625 124.796875 C 95.21875 124.636719 95.679688 124.519531 96.152344 124.441406 C 96.621094 124.363281 97.097656 124.324219 97.574219 124.328125 C 98.054688 124.332031 98.527344 124.378906 98.996094 124.460938 C 103.035156 124.789062 107.121094 124.460938 112.210938 124.460938 C 95.613281 153.359375 79.742188 181.527344 63.242188 210.597656 C 55.71875 197.441406 48.972656 184.816406 41.226562 172.941406 C 36.8125 166.210938 36.886719 161.34375 41.226562 154.464844 C 52.332031 136.539062 62.539062 118.035156 73.046875 99.660156 C 73.40625 98.839844 73.882812 98.101562 74.476562 97.433594 C 75.070312 96.765625 75.75 96.207031 76.519531 95.757812 C 77.292969 95.308594 78.113281 94.984375 78.984375 94.792969 C 79.855469 94.601562 80.734375 94.550781 81.621094 94.636719 C 109.054688 94.886719 136.511719 94.761719 165.296875 94.761719 C 163.617188 97.953125 162.4375 100.363281 161.109375 102.671875 C 139.792969 139.625 118.882812 176.832031 96.890625 213.359375 C 91.148438 222.875 91.199219 229.726562 99.398438 237.613281 C 129.464844 185.015625 159.703125 132.519531 190.496094 79.070312 L 85.582031 79.070312 C 86.636719 76.761719 87.210938 75.230469 88.089844 73.824219 C 95.210938 61.273438 102.28125 48.84375 109.703125 36.542969 C 110.363281 35.5625 111.191406 34.761719 112.191406 34.140625 C 113.195312 33.519531 114.277344 33.132812 115.445312 32.980469 C 166.902344 32.792969 218.355469 32.753906 269.808594 32.851562 C 270.554688 32.957031 271.289062 33.109375 272.015625 33.304688 C 225.101562 114.671875 178.359375 195.710938 130.96875 277.753906 L 242.527344 277.753906 C 254.238281 277.753906 254.636719 277.453125 259.078125 265.203125 L 154.4375 265.203125 L 275.148438 55.625 C 276.265625 57.027344 277.3125 58.484375 278.285156 59.992188 C 285.605469 72.542969 292.753906 85.324219 300.273438 97.824219 C 300.796875 98.542969 301.195312 99.320312 301.472656 100.164062 C 301.746094 101.007812 301.882812 101.871094 301.882812 102.757812 C 301.882812 103.644531 301.746094 104.511719 301.472656 105.355469 C 301.195312 106.195312 300.796875 106.976562 300.273438 107.691406 C 280.566406 141.484375 260.972656 175.402344 241.5 209.445312 C 240.546875 211.101562 239.742188 212.808594 238.238281 215.71875 Z M 238.238281 215.71875 " fill-opacity="1" fill-rule="nonzero" />\n</g>',t},f=e=>{const t=(e=>{let t;if(e=e?e.replace(/[^a-zA-Z0-9 ]/g,""):"",/^[A-Za-z0-9 ]*$/.test(e)){const r=(e=e.trim()).split(" ");t=r[0].charAt(0)+""+(r.length>1?r[r.length-1].charAt(0):""),t=String(t).toUpperCase()}return t})(e);return t?h(t):h()},m=e=>{if(e&&d()){const t=f(e),r=(new XMLSerializer).serializeToString(t);return"data:image/svg+xml;base64,"+window.btoa(r)}return""},w="Zintlr";function x(){return"undefined"!=typeof crypto&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}let y=null;function b(){return!!y&&(console.log=y.log,console.warn=y.warn,console.error=y.error,console.info=y.info,console.log("Emergency console restoration completed!"),!0)}y||(y={log:console.log.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),info:console.info.bind(console)});class q{static log(e,...t){y&&y.log(`[LOGGER] ${e}`,...t)}static warn(e,...t){y&&y.warn(`[LOGGER] ${e}`,...t)}static error(e,...t){y&&y.error(`[LOGGER] ${e}`,...t)}static info(e,...t){y&&y.info(`[LOGGER] ${e}`,...t)}}"undefined"!=typeof process&&(process.on("uncaughtException",e=>{b(),q.error("🚨 Uncaught Exception - Console restored:",e.message)}),process.on("unhandledRejection",e=>{b(),q.error("🚨 Unhandled Rejection - Console restored:",e)}),process.on("SIGINT",()=>{b(),q.log("🚨 SIGINT received - Console restored"),process.exit(0)}),process.on("SIGTERM",()=>{b(),q.log("🚨 SIGTERM received - Console restored"),process.exit(0)}));const S=new Map;let I=null;class L{constructor(e){this.requestId=e.requestId,this.requestData=e,this.startTime=Date.now(),this.logs=[],this.isCapturing=!1,this.cleanupTimeout=null,this.originalConsole=this.getOriginalConsole(),S.set(this.requestId,this)}getOriginalConsole(){if(y)return{log:y.log,warn:y.warn,error:y.error,info:y.info};throw new Error("Global console backup not available")}captureLog(e,t){const r={level:e,message:this.formatLogMessage(t),timestamp:(new Date).toISOString(),file:this.extractFileName((new Error).stack),..."error"===e&&t[0]instanceof Error&&{stack:t[0].stack}};this.logs.push(r)}formatLogMessage(e){return e.map(e=>{if("object"==typeof e&&null!==e)try{return JSON.stringify(e)}catch(e){return"[Object]"}return String(e)}).join(" ")}addLogPrefix(e,t){return`${{log:"📝",info:"ℹ️",warn:"⚠️",error:"❌"}[e]||"📝"} ${t}`}extractFileName(e){return function(e){try{if(!e)return"unknown";const t=e.split("\n");for(let e=1;e<t.length;e++){const r=t[e];if(r.includes("pages/")||r.includes("lib/")||r.includes("src/")){const e=r.match(/([^/\\]+\.js):(\d+)/);if(e)return`${e[1]}:${e[2]}`}}return"unknown"}catch(e){return"unknown"}}(e)}startCapturing(){try{if(I&&I!==this.requestId){q.warn(`⚠️ Another logger ${I} is active. Stopping it first.`);const e=S.get(I);e&&e.forceStopCapturing(),this.forceRestoreConsole()}I=this.requestId;const e=(...e)=>this.captureLog("log",e),t=(...e)=>this.captureLog("warn",e),r=(...e)=>this.captureLog("error",e),o=(...e)=>this.captureLog("info",e);e.__requestId=this.requestId,t.__requestId=this.requestId,r.__requestId=this.requestId,o.__requestId=this.requestId,console.log=e,console.warn=t,console.error=r,console.info=o,this.isCapturing=!0,q.log(`🔍 Log capturing started for request: ${this.requestId}`),this.cleanupTimeout=setTimeout(()=>{q.warn(`⚠️ Request ${this.requestId} timed out, forcing console cleanup`),this.forceStopCapturing()},3e4)}catch(e){q.error(`Failed to start capturing for ${this.requestId}:`,e.message),this.forceRestoreConsole()}}stopCapturing(){try{if(!this.isCapturing)return void q.warn(`⚠️ Stop capturing called but not currently capturing for ${this.requestId}`);this.cleanupTimeout&&(clearTimeout(this.cleanupTimeout),this.cleanupTimeout=null),console.log=this.originalConsole.log,console.warn=this.originalConsole.warn,console.error=this.originalConsole.error,console.info=this.originalConsole.info,this.isCapturing=!1,I===this.requestId&&(I=null),this.verifyConsoleRestoration()?q.log(`🔍 Log capturing stopped for request: ${this.requestId}. Captured ${this.logs.length} logs.`):(q.error(`Console restoration verification failed for ${this.requestId}`),this.forceRestoreConsole()),S.delete(this.requestId)}catch(e){q.error(`Error stopping capture for ${this.requestId}:`,e.message),this.forceRestoreConsole()}}forceStopCapturing(){try{this.cleanupTimeout&&(clearTimeout(this.cleanupTimeout),this.cleanupTimeout=null),this.isCapturing=!1,I===this.requestId&&(I=null),this.forceRestoreConsole(),S.delete(this.requestId),this.printSummary(new Error("Emergency cleanup"))}catch(e){b(),I=null}}forceRestoreConsole(){try{if(y)return console.log=y.log,console.warn=y.warn,console.error=y.error,console.info=y.info,q.log(`🔧 Force restored console for request: ${this.requestId}`),!0}catch(e){b(),I=null}return!1}verifyConsoleRestoration(){try{return console.log===this.originalConsole.log&&console.warn===this.originalConsole.warn&&console.error===this.originalConsole.error&&console.info===this.originalConsole.info}catch(e){return!1}}log(...e){this.captureLog("log",e)}info(...e){this.captureLog("info",e)}warn(...e){this.captureLog("warn",e)}error(...e){this.captureLog("error",e)}generateLogSummary(e=null){const t=Date.now()-this.startTime,r=this.logs.map(e=>({...e,message:this.addLogPrefix(e.level,e.message)})),o={requestId:this.requestId,timestamp:this.requestData.timestamp,duration:`${t}ms`,request:{method:this.requestData.method,url:this.requestData.url,userAgent:this.requestData.userAgent,ip:this.requestData.ip},totalLogs:r.length,logsByLevel:{log:r.filter(e=>"log"===e.level).length,info:r.filter(e=>"info"===e.level).length,warn:r.filter(e=>"warn"===e.level).length,error:r.filter(e=>"error"===e.level).length},logs:r};return e&&(o.error={message:e.message,stack:e.stack,timestamp:(new Date).toISOString()}),o}printSummary(e=null){const t=this.generateLogSummary(e);return q.log(JSON.stringify(t)),t}getRequestId(){return this.requestId}getLogCount(){return this.logs.length}getLogs(){return[...this.logs]}}function A(e){return async(t,r)=>{const o={requestId:t.headers["x-request-id"]||x(),url:t.url,method:t.method,userAgent:t.headers["user-agent"]||"unknown",ip:t.headers["x-forwarded-for"]||t.headers["x-real-ip"]||t.connection?.remoteAddress||t.socket?.remoteAddress||"unknown",timestamp:(new Date).toISOString()},n=new L(o);t.logger=n;try{r.headersSent||(r.setHeader("x-request-id",o.requestId),r.setHeader("x-timestamp",o.timestamp))}catch(e){n.originalConsole.warn("Could not set response headers:",e.message)}let s=!1;const i=(e="finish")=>{if(!s){s=!0;try{n.stopCapturing(),n.originalConsole.log(`✅ API Handler completed successfully (${e})`),n.printSummary()}catch(e){n.originalConsole.error(`Cleanup failed for ${o.requestId}:`,e.message),n.forceStopCapturing()}}};try{r.on("finish",()=>i("finish")),r.on("close",()=>i("close")),r.on("error",e=>{n.originalConsole.error(`Response error: ${e.message}`),i("error")})}catch(e){n.originalConsole.warn("Could not attach response listeners:",e.message)}const a=setTimeout(()=>{s||(n.originalConsole.warn(`⚠️ Request ${o.requestId} exceeded 60s timeout, forcing cleanup`),i("timeout"))},6e4);try{n.startCapturing();const o=await e(t,r);return clearTimeout(a),o}catch(e){if(clearTimeout(a),!s){s=!0;try{n.stopCapturing(),n.printSummary(e)}catch(e){n.forceStopCapturing()}}throw e}}}function k(e,t){try{return u.verify(e,t)}catch(e){return null}}function v(e){let t=e.ip??e?.["x-real-ip"],r=e?.["x-forwarded-for"];if("true"===process.env.CLOUDFLARE_ENABLED&&(r=e?.["cf-connecting-ip"]),r)try{t=Array.isArray(r)?r?.[0]:r.split(",")?.[0]}catch(e){t="Unknown"}return t||(t="Unknown"),t}let j={},T=!1;const $=e=>{if(!T)return console.warn("⚠️ Validation config not initialized. Call setValidationConfig() first."),null;const t=j[e];return t||(console.warn(`⚠️ No validation schema found for endpoint: ${e}`),null)},E={message:"",success:!1,code:400,data:{}};Object.defineProperty(exports,"toast",{enumerable:!0,get:function(){return e.toast}}),exports.BaseApiHandler=class{static wrap(e){return A(e)}},exports.BlurComponent=function({children:e,className:r="",childClass:o="",isBlur:n=!1}){return t.jsx("span",{className:""+(n?`justify-left flex  items-center bg-white/30  text-xl text-text-black blur-sm ${r}`:""),children:t.jsx("span",{className:`text-center ${o}`,children:e})})},exports.Button=({title:e,onClick:r=()=>{},className:o="",dark:s=!1,href:i=""})=>t.jsx(n,{href:i,prefetch:!1,legacyBehavior:!0,children:t.jsx("a",{className:`${s?"bg-text-black text-[#ffffff]":"bg-grayish-120 text-text-black border-text-black"} shadow-sm rounded-[10px] p-2 md:px-5 md:py-4 ${o} border text-xs md:text-base md:leading-4`,onClick:()=>r(),children:e})}),exports.HTMLContent=({html:e,className:r=""})=>t.jsx("p",{className:r,dangerouslySetInnerHTML:{__html:e}}),exports.ImageComponent=({src:e,width:n,height:s,alt:i,className:a="",id:l="",layout:c="intrinsic",objectFit:u="cover",objectPosition:d="center",priority:g=!1,bgColor:p=null,onClick:h=()=>{},onLoadingComplete:f=()=>{}})=>{const[m,w]=o.useState(e),[x,y]=o.useState(!1),b=o.useMemo(()=>i||"Zintlr",[i]);return o.useEffect(()=>{let t=!1,r=e;return e||(r=C(i||b,p)),t||(w(r),y(!1)),()=>{t=!0}},[e,p,i,b]),t.jsxs("div",{className:"relative",children:[!x&&t.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse rounded",style:{width:n,height:s,background:p||"linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"}}),t.jsx(r,{src:m||C(b,p),width:n,height:s,alt:i,className:`select-none drag-none transition-opacity duration-300 ${x?"opacity-100":"opacity-0"} ${a}`,loading:g?"eager":"lazy",objectFit:u,objectPosition:d,layout:c,id:l,onClick:e=>{h(e)},priority:g,onError:()=>{w(C(b,p))},onLoadingComplete:e=>{y(!0),f()}}),t.jsx("style",{jsx:!0,children:"\n        @keyframes shimmer {\n          0% {\n            background-position: -200% 0;\n          }\n          100% {\n            background-position: 200% 0;\n          }\n        }\n      "})]})},exports.LandingImageComponent=({src:e,width:n,height:s,alt:i,className:a="",id:l,layout:c,onClick:u=()=>{},priority:d=!1,objectFit:g="contain",createIfError:p=!1,onLoadingComplete:C=()=>{}})=>{const[h,f]=o.useState(void 0),x=o.useMemo(()=>"object"==typeof e?(e=>`https://ik.imagekit.io/zintlr${e}?tr=optimized`)(e.url):e,[e]),y=o.useMemo(()=>"object"==typeof e?e.alt:i,[e,i]);return o.useEffect(()=>{f(x)},[x]),o.useEffect(()=>{if(p){let e=!1,t=x;x||(t=m(y||w));const r=new Image;return r.onload=function(){e||f(t)},r.onerror=function(){e||f(m(y||w))},r.src=t,()=>{e=!0}}},[x,y,p]),t.jsx(r,{src:h||x||m(i||w),width:n,height:s,alt:y,className:`${a}`,loading:d?"eager":"lazy",objectFit:g,layout:c||"intrinsic",placeholder:n>=40&&"blur",blurDataURL:"data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",id:l,onClick:e=>{u(e)},priority:d,onLoadingComplete:e=>{C(e)}})},exports.ToastWrapper=({ToasterProps:r})=>t.jsx(e.Toaster,{position:"top-right",richColors:!0,...r}),exports.createDP=m,exports.createImg=C,exports.getAllValidationSchemas=()=>j,exports.getIP=v,exports.getValidationSchema=$,exports.isBrowser=d,exports.isValidationConfigInitialized=()=>T,exports.request_caller=function({method:t="post",endpoint:r="",data:o={},successToast:n=!1,errorToast:i=!0,headers:a={},controller:l=null,forceValidationSchema:u=null,skipValidation:d=!1,domain:g=null,logFn:p=console.log}){return new Promise((C,h)=>{const f={...E};if(!function(e){return["post","put","delete"].includes(e)}(t))return f.message="Method is not allowed",void h(f);p("Request:",{method:t,endpoint:r,data:o});const m=g??process.env.NEXT_PUBLIC_FRONTEND_URL+"/api/";if(!m)return f.message="Domain is required",void h(f);if(!d&&($(r)||$(u))){let t=$(r);u&&(t=$(u));const n=c.object().shape(t);try{n.validateSync(o),p("Validation passed",o)}catch(t){return f.message=t.errors.join(", "),e.toast.error(f.message),void h(f)}}a&&Object.keys(a).length>0&&(o["browser-ip-address"]=v(a));const w={method:t,url:m+r,data:"get"!==t?o:{},responseType:"json",headers:a,withCredentials:!0,crossDomain:!0};return p("Request object:",w),l&&l instanceof AbortController&&(w.signal=l.signal),s.request(w).then(t=>{const r=t.data;r.success?(n&&e.toast.success(r.message),C(r)):(i&&e.toast.error(r.message),h(r))}).catch(t=>{let r={};p&&(p("Request error:",t),p("Request object:",w)),t&&0===t?.response?.status&&t?.message?(f.message=t.message,r=f):t&&!1===t?.response?.data?.success&&t?.response?.data?.message?r=t.response.data:s.isCancel(t)?(f.code=-100,f.message="Cancelled",r=f):(p&&(p("Request error:",t),p("Request object:",w)),f.message="Something went wrong on our side. Please try again. Sorry for the inconvenience",r=f),l&&l instanceof AbortController&&l.signal.aborted&&(r.code=-100),(!l||l&&l instanceof AbortController&&!l.signal.aborted)&&(p&&p("Error details:",r.message),i&&e.toast.error(r.message)),h(r)})})},exports.resetValidationConfig=()=>{j={},T=!1},exports.serverRequestHandler=function({method:e="get",endpoint:t="",data:r={},req:o=null,res:n=null,isAuthRequired:i=!1,successCallback:a=()=>{},errorCallback:l=()=>{},isSourceRequired:c=!1,logFn:u=console.log,apiUrl:d}){if(!o||!n)return;r={...o.body,...r,...c&&{source:process.env.NEXT_PUBLIC_PLATFORM_SOURCE}};const g={};g["Captcha-Token"]=process.env.NEXT_PUBLIC_CAPTCHA_TOKEN;const p=d??process.env.NEXT_PUBLIC_API_URL;let C={method:e,url:p+t,headers:g};const h=function(e){const t={};return e?(e.split(";").forEach(e=>{const[r,o]=e.trim().split("=");r&&o&&(t[r]=decodeURIComponent(o))}),t):t}(o.headers.cookie);if(i){let e=o.headers.cookie;if(e&&(e=h.key&&h.access_token),!e){const e={...E};return e.message="Log in first",e.code=400,void n.status(e.code).json(e)}const t=k(h.key,process.env.CIPHER),s=k(h.access_token,process.env.CIPHER);C.headers.Authorization=s,r.key=t}if(h){const e=h["visitor-id"]||null;e&&(C.headers["visitor-id"]=e)}const f=r["browser-ip-address"]||v(o.headers);return r["browser-ip-address"]&&delete r["browser-ip-address"],C.headers["client-ip-address"]=f,r.ip_address=f,C={...C,params:"get"===e?r:{},data:"get"!==e?r:{},responseType:"json"},u&&u(C),s.request(C).then(t=>(t?.data?.success?("get"===e&&n.setHeader("Cache-Control","public, s-maxage=59, stale-while-revalidate=59"),a(t.data),n.status(200).send(JSON.stringify(t.data))):n.status(400).json(t.data),t.data)).catch(e=>{let t=e?.response?.data||{...E};return u&&(u("================================================"),u(e),u("================================================")),e&&0===e?.response?.status&&e?.message&&(t={...E},t.message=e.message,t.code=500),e&&502===e?.response?.status&&(t={...E},t.message="Server is down.",t.code=500),l(t),n.status(500===t?.code?500:400).json(t),t})},exports.setValidationConfig=e=>{j={...e},T=!0,console.log("✅ Validation configuration set successfully"),console.log(`📊 Configured ${Object.keys(e).length} validation rules`)},exports.verify_and_decrypt_jwt=k,exports.withGlobalLogging=A,exports.withPageLogging=function(e,t="getServerSideProps"){switch(t){case"getServerSideProps":return n=e,async e=>{if(d())return n(e);const t={requestId:`ssr_${x()}`,url:e.resolvedUrl||e.req?.url||"unknown",method:e.req?.method||"SSR",userAgent:e.req?.headers?.["user-agent"]||"unknown",ip:e.req?.headers?.["x-forwarded-for"]||e.req?.headers?.["x-real-ip"]||e.req?.connection?.remoteAddress||"unknown",timestamp:(new Date).toISOString()},r=new L(t);try{r.startCapturing();const t=await n(e);return r.stopCapturing(),r.printSummary(),t}catch(e){throw r.stopCapturing(),r.printSummary(e),e}};case"getInitialProps":return o=e,async e=>{if(d())return console.log(`🖥️ getInitialProps (client-side) for: ${e.pathname}`),o(e);const t={requestId:`initial_${x()}`,url:e.pathname||e.req?.url||"unknown",method:e.req?.method||"INITIAL",userAgent:e.req?.headers?.["user-agent"]||"unknown",ip:e.req?.headers?.["x-forwarded-for"]||e.req?.headers?.["x-real-ip"]||e.req?.connection?.remoteAddress||"unknown",timestamp:(new Date).toISOString()},r=new L(t);try{r.startCapturing();const t=await o(e);return r.stopCapturing(),r.printSummary(),t}catch(e){throw r.stopCapturing(),r.printSummary(e),e}};case"getStaticProps":return r=e,async e=>{const t={requestId:`static_${x()}`,url:e.params?JSON.stringify(e.params):"index",method:"STATIC",userAgent:"Next.js Build",ip:"build-time",timestamp:(new Date).toISOString()},o=new L(t);try{o.startCapturing();const t=await r(e);return o.stopCapturing(),o.printSummary(),t}catch(e){throw o.stopCapturing(),o.printSummary(e),e}};default:throw new Error(`Unknown function type: ${t}`)}var r,o,n};
//# sourceMappingURL=index.cjs.js.map
